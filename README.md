# MarketNarrative - å¸‚åœºå™äº‹è¿½è¸ªç³»ç»Ÿ

<div align="center">

**ğŸ“Š è®©Kçº¿å›¾ä¼š"è¯´è¯"çš„æŠ•èµ„ç ”ç©¶å·¥å…·**

[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](https://opensource.org/licenses/MIT)
[![Python 3.8+](https://img.shields.io/badge/python-3.8+-blue.svg)](https://www.python.org/downloads/)
[![Flask](https://img.shields.io/badge/flask-2.x-green.svg)](https://flask.palletsprojects.com/)

[English](#) | [ä¸­æ–‡æ–‡æ¡£](#)

</div>

---

## ğŸŒŸ é¡¹ç›®æ„¿æ™¯

> "å¸‚åœºæ˜¯ä¸€ä¸ªè®²æ•…äº‹çš„æœºå™¨ï¼Œè€Œè‚¡ä»·æ˜¯æ•…äº‹çš„è§†è§‰åŒ–å‘ˆç°ã€‚"

åœ¨æŠ•èµ„ç ”ç©¶ä¸­ï¼Œæˆ‘ä»¬å¸¸å¸¸é¢ä¸´è¿™æ ·çš„å›°å¢ƒï¼š
- **æŠ€æœ¯é¢**ï¼šçœ‹åˆ°ä»·é‡é½å‡/æ”¾é‡æ»æ¶¨ç­‰å¼‚å¸¸ï¼Œä½†ä¸çŸ¥é“èƒŒåå‘ç”Ÿäº†ä»€ä¹ˆ
- **åŸºæœ¬é¢**ï¼šé˜…è¯»äº†å¤§é‡å…¬å¸å…¬å‘Šå’Œæ–°é—»ï¼Œå´éš¾ä»¥ä¸è‚¡ä»·èµ°åŠ¿å»ºç«‹å…³è”
- **æ—¶é—´ç»´åº¦**ï¼šéš¾ä»¥è¿½è¸ªå’Œå¤ç›˜ä¸€ä¸ªæŠ•èµ„é€»è¾‘ä»"æå‡ºâ†’è´¨ç–‘â†’éªŒè¯â†’æœºæ„åŒ–"çš„å®Œæ•´æ¼”å˜

**MarketNarrative** ç³»ç»Ÿçš„æ ¸å¿ƒç†å¿µæ˜¯ï¼š**è®©å¸‚åœºå™äº‹å¯è§†åŒ–ã€å¯è¿½è¸ªã€å¯å¤ç›˜**ã€‚

## ğŸ’¡ æ ¸å¿ƒä»·å€¼

### 1. å¼‚å¸¸æ£€æµ‹å¼•æ“ï¼šä»å™ªéŸ³ä¸­è¯†åˆ«ä¿¡å·

ä¼ ç»ŸæŠ€æœ¯åˆ†æä¾èµ–å›ºå®šé˜ˆå€¼ï¼ˆå¦‚"æˆäº¤é‡çªç ´5æ—¥å‡çº¿çš„200%"ï¼‰ï¼Œä½†ä¸åŒè‚¡ç¥¨çš„æ³¢åŠ¨ç‡å·®å¼‚å·¨å¤§ã€‚MarketNarrativeå®ç°äº†**åŠ¨æ€é˜ˆå€¼æ™ºèƒ½æ£€æµ‹**ï¼š

```python
# 4ç§å¼‚å¸¸æ£€æµ‹ç®—æ³•
âœ… ä»·é‡é½å‡ (Price-Volume Surge)
âœ… æ”¾é‡æ»æ¶¨ (Volume Surge Without Price)  
âœ… ç¼©é‡ä¸Šæ¶¨ (Price Surge Without Volume)
âœ… æš´è·Œæ£€æµ‹ (Price Crash Detection)

# å…³é”®åˆ›æ–°ï¼šåŸºäºå†å²æ³¢åŠ¨ç‡çš„è‡ªé€‚åº”é˜ˆå€¼
threshold = mean + 2 * std_dev  # åŠ¨æ€è°ƒæ•´
```

### 2. äº¤äº’å¼æ³¨é‡Šç³»ç»Ÿï¼šæ„å»ºäº‹ä»¶-è‚¡ä»·å…³è”ç½‘ç»œ

é€šè¿‡æ‹–æ‹½å¼æ³¨é‡ŠåŠŸèƒ½ï¼Œç ”ç©¶è€…å¯ä»¥ï¼š
- åœ¨å…³é”®Kçº¿ä¸Šæ ‡æ³¨äº‹ä»¶ï¼ˆå¦‚"FDAæ‰¹å‡†æ–°è¯"ã€"ç›‘ç®¡é£æš´"ï¼‰
- è·¨å‘¨æœŸæ˜¾ç¤ºæ³¨é‡Šï¼ˆæ—¥K/å‘¨K/æœˆKè‡ªåŠ¨æ˜ å°„ï¼‰
- å›æº¯éªŒè¯æŠ•èµ„é€»è¾‘çš„æ¼”å˜è¿‡ç¨‹

```javascript
// æ ¸å¿ƒåŠŸèƒ½ï¼šä»æ—¥Kæ³¨é‡Šè‡ªåŠ¨åŒæ­¥åˆ°å‘¨K/æœˆK
function syncAnnotationsToHigherPeriod(dailyAnnotations, targetPeriod) {
    // æ™ºèƒ½æ˜ å°„ç®—æ³•ï¼Œç¡®ä¿è·¨å‘¨æœŸä¸€è‡´æ€§
}
```

### 3. è‚¡ç¥¨ä»£ç æ™ºèƒ½è¯†åˆ«ï¼šç»Ÿä¸€å¤šå¸‚åœºæ•°æ®

æ”¯æŒä»¥ä¸‹æ ¼å¼çš„è‡ªåŠ¨è¯†åˆ«å’Œæ ‡å‡†åŒ–ï¼š
- **Aè‚¡**: `600519.SH` (ä¸Šäº¤æ‰€), `000858.SZ` (æ·±äº¤æ‰€)
- **æ¸¯è‚¡**: `00700.HK` (è…¾è®¯æ§è‚¡)
- **ç¾è‚¡**: `TSLA` (ç‰¹æ–¯æ‹‰), `AAPL` (è‹¹æœ)
- çº¯æ•°å­—ä»£ç æ™ºèƒ½æ¨æ–­ï¼š`600519` â†’ `600519.SH`

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

```mermaid
graph TB
    subgraph å‰ç«¯å±‚
        A[ECharts Kçº¿å›¾] --> B[æ³¨é‡Šç¼–è¾‘å™¨]
        B --> C[å¼‚å¸¸æ ‡è®°å™¨]
    end
    
    subgraph åº”ç”¨å±‚
        D[Flask API] --> E[å¼‚å¸¸æ£€æµ‹å¼•æ“]
        E --> F[æ³¨é‡ŠåŒæ­¥ç³»ç»Ÿ]
    end
    
    subgraph æ•°æ®å±‚
        G[PostgreSQL/SQLite] --> H[æ³¨é‡Šå­˜å‚¨]
        I[Yahoo Finance API] --> J[å®æ—¶è¡Œæƒ…]
    end
    
    A --> D
    D --> G
    D --> I
```

**å…³é”®æŠ€æœ¯é€‰å‹ï¼š**
- **åç«¯**: Python Flask - è½»é‡çº§ï¼Œé€‚åˆå¿«é€Ÿè¿­ä»£
- **å‰ç«¯**: Vanilla JS - æ— æ¡†æ¶ä¾èµ–ï¼Œé™ä½å­¦ä¹ æˆæœ¬
- **å›¾è¡¨**: ECharts - é‡‘èå›¾è¡¨äº‹å®æ ‡å‡†
- **æ•°æ®åº“**: SQLite (å¼€å‘) / PostgreSQL (ç”Ÿäº§)
- **éƒ¨ç½²**: Railway - ä¸€é”®éƒ¨ç½²ï¼Œ0è¿ç»´

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æœ¬åœ°è¿è¡Œ

```bash
# 1. å…‹éš†ä»“åº“
git clone https://github.com/MILKMILKKING/MarketNarrative.git
cd MarketNarrative

# 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python3 -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# 3. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 4. åˆå§‹åŒ–æ•°æ®åº“
python scripts/init_db.py

# 5. é…ç½®ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼‰
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œè®¾ç½® SECRET_KEY ç­‰å‚æ•°

# 6. å¯åŠ¨åº”ç”¨
python app.py

# 7. è®¿é—®
open http://localhost:5001
```

### Railway éƒ¨ç½²

ç‚¹å‡»æŒ‰é’®ä¸€é”®éƒ¨ç½²åˆ° Railwayï¼š

[![Deploy on Railway](https://railway.app/button.svg)](https://railway.app/template)

è¯¦ç»†éƒ¨ç½²æŒ‡å—è¯·æŸ¥çœ‹ [docs/DEPLOYMENT.md](docs/DEPLOYMENT.md)

## ğŸ“š ä½¿ç”¨æŒ‡å—

### 1. æœç´¢è‚¡ç¥¨

åœ¨æœç´¢æ¡†è¾“å…¥ï¼š
- è‚¡ç¥¨ä»£ç ï¼š`600519`ã€`TSLA`ã€`00700.HK`
- å…¬å¸åç§°ï¼š`èŒ…å°`ã€`ç‰¹æ–¯æ‹‰`ã€`è…¾è®¯`

ç³»ç»Ÿä¼šè‡ªåŠ¨è¯†åˆ«å¹¶æ ‡å‡†åŒ–ã€‚

### 2. æŸ¥çœ‹å¼‚å¸¸æ ‡è®°

ç³»ç»Ÿè‡ªåŠ¨åœ¨Kçº¿å›¾ä¸Šæ ‡æ³¨æ£€æµ‹åˆ°çš„å¼‚å¸¸ï¼š
- ğŸ”º **çº¢è‰²ä¸‰è§’**ï¼šä»·é‡é½å‡
- ğŸŸ  **æ©™è‰²åœ†åœˆ**ï¼šæ”¾é‡æ»æ¶¨  
- ğŸ”µ **è“è‰²æ–¹å—**ï¼šç¼©é‡ä¸Šæ¶¨
- âš ï¸ **çº¢è‰²æ„Ÿå¹å·**ï¼šæš´è·Œ

### 3. æ·»åŠ æ³¨é‡Š

- **é¼ æ ‡æ‹–æ‹½**ï¼šåœ¨Kçº¿ä¸Šæ‹–æ‹½é€‰æ‹©èŒƒå›´
- **è¾“å…¥å†…å®¹**ï¼šè®°å½•äº‹ä»¶ã€è§‚ç‚¹ã€æˆ–é€»è¾‘æ¨æ¼”
- **åˆ‡æ¢å‘¨æœŸ**ï¼šæ—¥K/å‘¨K/æœˆKè‡ªåŠ¨åŒæ­¥æ³¨é‡Š

### 4. å¤ç›˜åˆ†æ

- **æ—¶é—´è½´å›é¡¾**ï¼šæŸ¥çœ‹æŸä¸ªæŠ•èµ„é€»è¾‘ä»æå‡ºåˆ°éªŒè¯çš„å…¨è¿‡ç¨‹
- **è·¨å¸‚åœºå¯¹æ¯”**ï¼šå¯¹æ¯”Aè‚¡/æ¸¯è‚¡/ç¾è‚¡åŒç±»å…¬å¸çš„å™äº‹å·®å¼‚

## ğŸ“– æ–¹æ³•è®º

æœ¬ç³»ç»Ÿçš„æ ¸å¿ƒä¸æ˜¯"é¢„æµ‹è‚¡ä»·"ï¼Œè€Œæ˜¯ï¼š

### âœ… æ­£ç¡®çš„ä½¿ç”¨å§¿åŠ¿

1. **äº‹åå½’å› **ï¼šåœ¨æŠ€æœ¯é¢å¼‚å¸¸åï¼Œè¿½æº¯åŸºæœ¬é¢åŸå› 
2. **é€»è¾‘å¤ç›˜**ï¼šè®°å½•è‡ªå·±çš„æ€è€ƒè½¨è¿¹ï¼ŒéªŒè¯æŠ•èµ„æ¡†æ¶
3. **æ¡ˆä¾‹ç§¯ç´¯**ï¼šå»ºç«‹ä¸ªäººçš„å¸‚åœºå™äº‹æ¡ˆä¾‹åº“

### âŒ é”™è¯¯çš„æœŸå¾…

- âŒ "è‡ªåŠ¨æ¨èä¹°å–ç‚¹"
- âŒ "é¢„æµ‹æ˜å¤©æ¶¨è·Œ"
- âŒ "100%å‡†ç¡®çš„ä¿¡å·"

æ›´å¤šå®æˆ˜æ¡ˆä¾‹è¯·æŸ¥çœ‹ [docs/EXAMPLES.md](docs/EXAMPLES.md)

## ğŸ—‚ï¸ é¡¹ç›®ç»“æ„

```
MarketNarrative/
â”œâ”€â”€ app.py                      # Flaskä¸»åº”ç”¨ (4064è¡Œ)
â”œâ”€â”€ requirements.txt            # Pythonä¾èµ–
â”œâ”€â”€ .env.example               # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”‚
â”œâ”€â”€ templates/                  # HTMLæ¨¡æ¿
â”‚   â”œâ”€â”€ index.html            # ä¸»ç•Œé¢
â”‚   â””â”€â”€ login.html            # ç™»å½•é¡µ
â”‚
â”œâ”€â”€ static/                     # å‰ç«¯èµ„æº
â”‚   â”œâ”€â”€ script.js             # æ ¸å¿ƒé€»è¾‘ (245KB)
â”‚   â””â”€â”€ style.css             # æ ·å¼æ–‡ä»¶
â”‚
â”œâ”€â”€ docs/                       # æ–‡æ¡£
â”‚   â”œâ”€â”€ ARCHITECTURE.md       # ç³»ç»Ÿæ¶æ„è¯¦è§£
â”‚   â”œâ”€â”€ DEPLOYMENT.md         # éƒ¨ç½²æŒ‡å—
â”‚   â””â”€â”€ EXAMPLES.md           # æ¡ˆä¾‹åˆ†æ
â”‚
â””â”€â”€ scripts/                    # å·¥å…·è„šæœ¬
    â””â”€â”€ init_db.py            # æ•°æ®åº“åˆå§‹åŒ–
```

## ğŸ”§ ç¯å¢ƒå˜é‡é…ç½®

åˆ›å»º `.env` æ–‡ä»¶ï¼ˆå‚è€ƒ `.env.example`ï¼‰ï¼š

```bash
# Flask å¯†é’¥ï¼ˆå¿…é¡»ï¼‰
SECRET_KEY=your-secret-key-here

# Basic Auth å¯†ç ï¼ˆç”Ÿäº§ç¯å¢ƒæ¨èï¼‰
APP_PASSWORD=your-secure-password

# æ•°æ®åº“ URLï¼ˆå¯é€‰ï¼Œé»˜è®¤ä½¿ç”¨ SQLiteï¼‰
DATABASE_URL=postgresql://user:pass@host:port/dbname

# ç«¯å£ï¼ˆå¯é€‰ï¼Œé»˜è®¤5001ï¼‰
PORT=5001

# Dify AI é›†æˆï¼ˆå¯é€‰ï¼‰
DIFY_API_TOKEN=your-dify-token
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

æ¬¢è¿è´¡çŒ®ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ğŸ™ è‡´è°¢

- [Yahoo Finance](https://finance.yahoo.com/) - è‚¡ç¥¨æ•°æ®API
- [ECharts](https://echarts.apache.org/) - å¼€æºå¯è§†åŒ–åº“
- [Flask](https://flask.palletsprojects.com/) - Python Webæ¡†æ¶

## ğŸ“¬ è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼š
- ğŸ“§ Email: ylyrikliu@icloud.com


---

<div align="center">

**If you find this project useful, please â­ star it!**

Made with â¤ï¸ by lyrik

</div>